-- -------------------------------------------------------------------
-- File: conky.conf
-- Type: conky main configuration file (Lua format)
-- By Arnold
-- Last modified: 2025-01-27
-- OS: Linux (Arch)
-- Version: 17
-- -------------------------------------------------------------------

conky.config = {
    -- Execution
    background = true,
    update_interval = 2,  -- Faster updates for smoother feel
    total_run_times = 0,
    cpu_avg_samples = 2,
    net_avg_samples = 2,
    no_buffers = true,

    -- Window settings
    own_window = true,
    own_window_type = 'normal',
    own_window_transparent = false,
    own_window_argb_visual = true,
    own_window_argb_value = 220,  -- Slightly less transparent for better readability
    own_window_colour = '0a0a0a',  -- Darker background
    own_window_class = 'Conky',
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',

    -- Size and position
    alignment = 'top_left',
    gap_x = 10,
    gap_y = 10,
    minimum_width = 450,
    minimum_height = 5,
    maximum_width = 450,

    -- Graphics
    double_buffer = true,
    draw_shades = false,  -- Cleaner look without shadows
    draw_outline = false,
    draw_borders = false,
    draw_graph_borders = true,
    stippled_borders = 0,
    border_inner_margin = 8,
    border_outer_margin = 0,
    border_width = 1,
    default_bar_width = 100,
    default_bar_height = 8,

    -- Text
    use_xft = true,
    font = 'CaskaydiaMono NF:size=12',
    xftalpha = 1,
    override_utf8_locale = true,
    uppercase = false,
    short_units = true,
    use_spacer = 'none',
    max_text_width = 0,

    -- Colors (Modern color scheme)
    default_color = 'e0e0e0',
    default_shade_color = '000000',
    default_outline_color = '000000',
    color0 = '00d4ff',      -- Cyan accent
    color1 = '90ee90',      -- Light green
    color2 = '4deeea',      -- Bright cyan
    color3 = 'ffe66d',      -- Yellow
    color4 = 'ff6b6b',      -- Red
    color5 = 'ff9f43',      -- Orange
    color6 = 'ffd93d',      -- Gold
    color7 = '606060',      -- Gray
    color8 = '74ee15',      -- Bright green
    color9 = '404040',      -- Dark gray for graphs

    -- Process settings
    top_name_width = 20,
    top_cpu_separate = false,

    -- Lua
    lua_load = '/home/arnold/.config/conky/conky.lua',
}

conky.text = [[
${color0}${font CaskaydiaMono NF:bold:size=11}╭──────────────────────────────────────────────────────╮
${color0}│${voffset -2}${font CaskaydiaMono NF:bold:size=32}${alignc}${time %H:%M}${font}${color0}│
${color0}│${voffset -4}${font CaskaydiaMono NF:size=12}${alignc}${time %A, %d %B %Y}${font}${color0}│
${color0}╰──────────────────────────────────────────────╯${color}
${voffset 4}${color2}┌─ SYSTEM ${color7}${hr 2}
${color1}│ Host:${color} $nodename${goto 250}${color1}Uptime:${color8} $uptime
${color1}│ Kernel:${color} ${kernel}
${color1}│ Distro:${color} ${lua get_distro}
${voffset 2}${color2}┌─ CPU ${color7}${hr 2}
${color1}│ Model:${color} ${lua get_cpu_model}
${color1}│ Arch:${color} ${machine}${goto 250}${color1}Freq:${color5} ${freq_g}GHz
${color1}│ Temp:${lua get_cpu_temp_color} ${lua get_cpu_temp}
${voffset 2}${color1}│ Core 1${color5}${goto 90}${cpubar cpu1 10,110}${color} ${cpu cpu1}%${goto 250}${color1}Core 2${color5}${goto 315}${cpubar cpu2 10,110}${color} ${cpu cpu2}%
${color1}│ Core 3${color5}${goto 90}${cpubar cpu3 10,110}${color} ${cpu cpu3}%${goto 250}${color1}Core 4${color5}${goto 315}${cpubar cpu4 10,110}${color} ${cpu cpu4}%
${color1}│${color9}${alignc}${cpugraph 40,420 303030 4deeea -t}
${voffset 2}${color2}┌─ MEMORY ${color7}${hr 2}
${color1}│ RAM:${color5}${goto 90}${membar 10,200}${color} ${mem} / ${memmax}${alignr}${memperc}%
${color1}│ SWAP:${color6}${goto 90}${swapbar 10,200}${color} ${swap} / ${swapmax}${alignr}${swapperc}%
${voffset 2}${color2}┌─ NETWORK ${color7}${hr 2}
${if_existing /sys/class/net/enp0s31f6/operstate up}\
${color1}│ Cable${goto 90}${color8}▼${color} ${downspeed enp0s31f6}/s${goto 260}${color5}▲${color} ${upspeed enp0s31f6}/s
${color1}│ Total${goto 90}${color8}▼${color} ${lua get_net_rx enp0s31f6}${goto 260}${color5}▲${color} ${lua get_net_tx enp0s31f6}
${color1}│${color9}${goto 30}${downspeedgraph enp0s31f6 40,200 303030 74ee15}${goto 240}${upspeedgraph enp0s31f6 40,200 303030 ff6b6b}\
${else}\
${color1}│ Cable${goto 90}${color4}Disconnected
${color1}│${color9}${goto 30}${downspeedgraph lo 40,200 303030 303030}${goto 240}${upspeedgraph lo 40,200 303030 303030}\
${endif}
${if_existing /sys/class/net/wlan0/operstate up}\
${color1}│ WiFi${goto 90}${color8}▼${color} ${downspeed wlan0}/s${goto 260}${color5}▲${color} ${upspeed wlan0}/s
${color1}│ Total${goto 90}${color8}▼${color} ${lua get_wifi_rx}${goto 260}${color5}▲${color} ${lua get_wifi_tx}
${color1}│${color9}${goto 30}${downspeedgraph wlan0 40,200 303030 74ee15}${goto 240}${upspeedgraph wlan0 40,200 303030 ff6b6b}\
${else}${if_existing /sys/class/net/wlan1/operstate up}\
${color1}│ WiFi${goto 90}${color8}▼${color} ${downspeed wlan1}/s${goto 260}${color5}▲${color} ${upspeed wlan1}/s
${color1}│ Total${goto 90}${color8}▼${color} ${lua get_wifi_rx}${goto 260}${color5}▲${color} ${lua get_wifi_tx}
${color1}│${color9}${goto 30}${downspeedgraph wlan1 40,200 303030 74ee15}${goto 240}${upspeedgraph wlan1 40,200 303030 ff6b6b}\
${else}\
${color1}│ WiFi${goto 90}${color4}Disconnected
${color1}│${color9}${goto 30}${downspeedgraph lo 40,200 303030 303030}${goto 240}${upspeedgraph lo 40,200 303030 303030}\
${endif}${endif}
${voffset 2}${color2}┌─ GPU ${color7}${hr 2}
${color1}│ Model:${color} ${lua get_gpu_model}
${color1}│ Vendor:${color} ${lua get_gpu_vendor}
${color1}│ Resolution:${color} ${exec xdpyinfo 2>/dev/null | grep dimensions | awk '{print $2}'}
${voffset 2}${color2}┌─ STORAGE ${color7}${hr 2}
${color1}│ Root${goto 90}\
${if_match ${fs_used_perc /} >= 75}${color4}\
${else}${if_match ${fs_used_perc /} >= 50}${color5}\
${else}${color8}${endif}${endif}\
${fs_bar 10,200 /}${color} ${fs_used /} /${fs_size /}${alignr}${fs_used_perc /}%
${color1}│ Home${goto 90}\
${if_match ${fs_used_perc /home} >= 75}${color4}\
${else}${if_match ${fs_used_perc /home} >= 50}${color5}\
${else}${color8}${endif}${endif}\
${fs_bar 10,200 /home}${color} ${fs_used /home} / ${fs_size /home}${alignr}${fs_used_perc /home}%
${color1}│ Data${goto 90}\
${if_match ${fs_used_perc /mnt/sdb1} >= 75}${color4}\
${else}${if_match ${fs_used_perc /mnt/sdb1} >= 50}${color5}\
${else}${color8}${endif}${endif}\
${fs_bar 10,200 /mnt/sdb1}${color} ${fs_used /mnt/sdb1} /${fs_size /mnt/sdb1}${alignr}${fs_used_perc /mnt/sdb1}%
${voffset 2}${color2}┌─ DISK I/O ${color7}${hr 2}
${color1}│ ${color3}nvme${goto 90}${color5}▲ ${diskio_write nvme0n1}${goto 200}${color8}▼ ${diskio_read nvme0n1}${goto 310}${lua get_nvme_temp_color}${lua get_nvme_temp}°C${alignr}${color9}${diskiograph nvme0n1 12,70 303030 4deeea -t -l}
${color1}│ ${color3}sda${goto 90}${color5}▲ ${diskio_write sda}${goto 200}${color8}▼ ${diskio_read sda}${goto 310}${color6}${hddtemp /dev/sda}${if_match "${hddtemp /dev/sda}" != "N/A"}°C${endif}${alignr}${color9}${diskiograph sda 12,70 303030 4deeea -t -l}
${color1}│ ${color3}sdb${goto 90}${color5}▲ ${diskio_write sdb}${goto 200}${color8}▼ ${diskio_read sdb}${goto 310}${color6}${hddtemp /dev/sdb}${if_match "${hddtemp /dev/sdb}" != "N/A"}°C${endif}${alignr}${color9}${diskiograph sdb 12,70 303030 4deeea -t -l}
${voffset 2}${color2}┌─ PROCESSES ${color7}${hr 2}${color1} Running: ${color8}${running_processes}${color1} / Total: ${color}${processes}
${color1}│${voffset 2}${alignc}${color2}━━━ Top CPU Usage ━━━
${color1}│ ${color7}NAME${goto 200}PID${goto 270}CPU${goto 350}MEM
${color1}│ ${color}${top name 1}${goto 200}${top pid 1}${goto 260}${color5}${top cpu 1}%${goto 340}${color8}${top mem_res 1}
${color1}│ ${color}${top name 2}${goto 200}${top pid 2}${goto 260}${color5}${top cpu 2}%${goto 340}${color8}${top mem_res 2}
${color1}│ ${color}${top name 3}${goto 200}${top pid 3}${goto 260}${color5}${top cpu 3}%${goto 340}${color8}${top mem_res 3}
${color1}│ ${color}${top name 4}${goto 200}${top pid 4}${goto 260}${color5}${top cpu 4}%${goto 340}${color8}${top mem_res 4}
${color1}│ ${color}${top name 5}${goto 200}${top pid 5}${goto 260}${color5}${top cpu 5}%${goto 340}${color8}${top mem_res 5}
${color1}│${voffset 2}${alignc}${color2}━━━ Top Memory Usage ━━━
${color1}│ ${color7}NAME${goto 200}PID${goto 270}CPU${goto 350}MEM
${color1}│ ${color}${top_mem name 1}${goto 200}${top_mem pid 1}${goto 260}${color5}${top_mem cpu 1}%${goto 340}${color8}${top_mem mem_res 1}
${color1}│ ${color}${top_mem name 2}${goto 200}${top_mem pid 2}${goto 260}${color5}${top_mem cpu 2}%${goto 340}${color8}${top_mem mem_res 2}
${color1}│ ${color}${top_mem name 3}${goto 200}${top_mem pid 3}${goto 260}${color5}${top_mem cpu 3}%${goto 340}${color8}${top_mem mem_res 3}
${color1}│ ${color}${top_mem name 4}${goto 200}${top_mem pid 4}${goto 260}${color5}${top_mem cpu 4}%${goto 340}${color8}${top_mem mem_res 4}
${color1}│ ${color}${top_mem name 5}${goto 200}${top_mem pid 5}${goto 260}${color5}${top_mem cpu 5}%${goto 340}${color8}${top_mem mem_res 5}
${voffset 2}${color2}┌─ SYSTEM LOAD ${color7}${hr 2}
${color1}│ Load Average:${color} ${loadavg 1} ${loadavg 2} ${loadavg 3}${alignr}${color7}(1m 5m 15m)
${color7}${hr 1}
]]
